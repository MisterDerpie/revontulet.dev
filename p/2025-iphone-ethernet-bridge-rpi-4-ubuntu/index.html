<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content='width=device-width,initial-scale=1'><meta name=description content="This guide shows how to set up an iPhone USB to Ethernet bridge on the Raspberry Pi. Instead of Raspbian, this is a guide for Ubuntu Server. "><title>iPhone Ethernet bridge on RaspberryPi with Ubuntu Server</title><link rel=canonical href=https://revontulet.dev/p/2025-iphone-ethernet-bridge-rpi-4-ubuntu/><link rel=stylesheet href=/scss/style.min.946cca6c6259ef94ac55abfae7c7bf3291ea3ed5eea17ef77500b257217c6710.css><meta property='og:title' content="iPhone Ethernet bridge on RaspberryPi with Ubuntu Server"><meta property='og:description' content="This guide shows how to set up an iPhone USB to Ethernet bridge on the Raspberry Pi. Instead of Raspbian, this is a guide for Ubuntu Server. "><meta property='og:url' content='https://revontulet.dev/p/2025-iphone-ethernet-bridge-rpi-4-ubuntu/'><meta property='og:site_name' content='revontulet.dev'><meta property='og:type' content='article'><meta property='article:section' content='Post'><meta property='article:tag' content='Linux'><meta property='article:tag' content='Ubuntu'><meta property='article:tag' content='RaspberryPi'><meta property='article:published_time' content='2025-05-11T08:00:00+00:00'><meta property='article:modified_time' content='2025-05-11T08:00:00+00:00'><meta name=twitter:title content="iPhone Ethernet bridge on RaspberryPi with Ubuntu Server"><meta name=twitter:description content="This guide shows how to set up an iPhone USB to Ethernet bridge on the Raspberry Pi. Instead of Raspbian, this is a guide for Ubuntu Server. "><link rel="shortcut icon" href=/favicon.ico><meta author="Matthias DÃ¶pmann"></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label="Toggle Menu">
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu_5a2f0634de06e519.png width=300 height=300 class=site-logo loading=lazy alt=Avatar>
</a><span class=emoji>ðŸ‡«ðŸ‡®</span></figure><div class=site-meta><h1 class=site-name><a href=/>revontulet.dev</a></h1><h2 class=site-description>A blog about Software Engineering from the arctic circle. And anything else.</h2></div></header><ol class=menu-social><li><a href=https://github.com/MisterDerpie target=_blank title=GitHub rel=me><svg class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=https://www.linkedin.com/in/matthias-doepmann/ target=_blank title=LinkedIn rel=me><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-brand-linkedin"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M8 11v5"/><path d="M8 8v.01"/><path d="M12 16v-5"/><path d="M16 16v-3a2 2 0 10-4 0"/><path d="M3 7a4 4 0 014-4h10a4 4 0 014 4v10a4 4 0 01-4 4H7a4 4 0 01-4-4z"/></svg></a></li><li><a href=https://revontulet.dev/index.xml title=RSS rel=me><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-rss"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 19m-1 0a1 1 0 102 0 1 1 0 10-2 0"/><path d="M4 4a16 16 0 0116 16"/><path d="M4 11a9 9 0 019 9"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg>
<span>Home</span></a></li><li><a href=/cv/><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-file-cv"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M14 3v4a1 1 0 001 1h4"/><path d="M17 21H7a2 2 0 01-2-2V5a2 2 0 012-2h7l5 5v11a2 2 0 01-2 2z"/><path d="M11 12.5a1.5 1.5.0 00-3 0v3a1.5 1.5.0 003 0"/><path d="M13 11l1.5 6 1.5-6"/></svg>
<span>About Me</span></a></li><li><a href=/archives/><svg class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg>
<span>Archives</span></a></li><li><a href=/search/><svg class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg>
<span>Search</span></a></li><li class=menu-bottom-section><ol class=menu><li id=dark-mode-toggle><svg class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<svg class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg>
<span>Dark Mode</span></li></ol></li></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">Table of contents</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#installing-ubuntu-server>Installing Ubuntu Server</a></li><li><a href=#raspberrypi-internet-setup>RaspberryPi Internet Setup</a><ol><li><a href=#connect-to-the-iphone>Connect to the iPhone</a></li><li><a href=#route-traffic-through-the-iphone>Route traffic through the iPhone</a></li></ol></li><li><a href=#using-the-raspberrypi-with-a-router>Using the RaspberryPi with a Router</a></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><header class=article-category><a href=/categories/tech/ style=background-color:#01efac;color:#000>Tech</a></header><div class=article-title-wrapper><h2 class=article-title><a href=/p/2025-iphone-ethernet-bridge-rpi-4-ubuntu/>iPhone Ethernet bridge on RaspberryPi with Ubuntu Server</a></h2><h3 class=article-subtitle>This guide shows how to set up an iPhone USB to Ethernet bridge on the Raspberry Pi. Instead of Raspbian, this is a guide for Ubuntu Server.</h3></div><footer class=article-time><div><svg class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg>
<time class=article-time--published>May 11, 2025</time></div><div><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<time class=article-time--reading>6 minute read</time></div></footer></div></header><section class=article-content><p>This post covers how to tether your iPhone via USB to your RaspberryPi, and share the iPhone&rsquo;s network on <code>eth0</code>.
Eventually, the RaspberryPi will be connected to a router via ethernet, making the router use the iPhone&rsquo;s internet connection.
A RaspberryPi 4B is used, but this guide <em>should</em> work on other models too.</p><p><img src=/p/2025-iphone-ethernet-bridge-rpi-4-ubuntu/setup.webp width=411 height=241 srcset="/p/2025-iphone-ethernet-bridge-rpi-4-ubuntu/setup_hu_117e63e1bc3d7006.webp 480w, /p/2025-iphone-ethernet-bridge-rpi-4-ubuntu/setup_hu_1c320d6ae2011933.webp 1024w" loading=lazy alt=iphone-connected-to-rpi-connected-to-router class=gallery-image data-flex-grow=170 data-flex-basis=409px></p><p>One may wonder why this setup is needed.
Routing at least DNS traffic through the Pi with the <a class=link href=https://pi-hole.net/ target=_blank rel=noopener>Pi-hole</a> is a common use-case, but all traffic less so.</p><p>My connection to the world is through the iPhone&rsquo;s hotspot.
Said hotspot turns invisible after a period of time.
It is not the classic hidden SSID invisible, but connecting to it once invisible is impossible, only connected devices stay.</p><p>Still, why use a router, when the RaspberryPi comes with a WLAN chip?
About a month ago, I attempted a similar setup and had the Pi directly as a WiFi hotspot.
Unfortuantely, the throughput was only about 40 Mbit, defeating the purpose of the iPhone&rsquo;s 300 Mbit 5G connection.</p><p>Given the fact that my RaspberyPi was collecting dust, it was perfectly suited.
Moreover does my router at hand not support a USB connection, hence the need.</p><h2 id=installing-ubuntu-server>Installing Ubuntu Server</h2><p>To install Ubuntu Server, you may use the RaspberryPi Imager.
It can be downloaded from <a class=link href=https://www.raspberrypi.com/software/ target=_blank rel=noopener>raspberrypi.com/software</a>.</p><p>During the installation, it will ask you to provide a custom configuration.
Choose yes and provide a username and a password to be able to SSH into it during the next steps.
Then install it.</p><p>Once done, start your RaspberryPi and connect it via ethernet to your router.</p><h2 id=raspberrypi-internet-setup>RaspberryPi Internet Setup</h2><p>Find the RaspberryPi&rsquo;s IP Address from your router.
Usually, it is listed under connected devices.
Then ssh into it, e.g.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ssh name-you-chose@192.168.X.Y
</span></span></code></pre></td></tr></table></div></div><p>SSH probably asks you to trust the fingerprint, and you may select yes.
Note: In case you need to factory reset your Pi, and it gets assigned the same IP, you will see an error from ssh.
That is due to not matching fingerprints.
Remove the entries of that IP from <code>~/.ssh/known_hosts</code>.</p><h3 id=connect-to-the-iphone>Connect to the iPhone</h3><p>Install the packages</p><ul><li><a class=link href=https://github.com/libimobiledevice/usbmuxd target=_blank rel=noopener>usbmuxd</a></li><li><a class=link href=https://github.com/libimobiledevice/libimobiledevice target=_blank rel=noopener>libimobiledevice-utils</a></li><li><code>ipeth-utils</code> (this may be optional, I didn&rsquo;t try it without)</li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>sudo apt install -y <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    usbmuxd <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    ipheth-utils <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    libimobiledevice-utils
</span></span></code></pre></td></tr></table></div></div><p>Now it is time to connect our iPhone.
With Mobile Hotspot enabled, it will show a dialog to Trust/Not trust the RaspberryPi.
Trust it, and you may be required to enter your password.</p><p>We can see that it&rsquo;s connected on the RaspberryPi running</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>networkctl
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>IDX LINK            TYPE     OPERATIONAL SETUP
</span></span><span class=line><span class=cl>  1 lo              loopback carrier     unmanaged
</span></span><span class=line><span class=cl>  2 eth0            ether    routable    configured
</span></span><span class=line><span class=cl>  3 wlan0           wlan     off         unmanaged
</span></span><span class=line><span class=cl>  4 enxfae5ce082148 ether    off         unmanaged
</span></span></code></pre></td></tr></table></div></div><p><strong>Important: Your iPhone will have a different ID, and in the steps from here on you need to replace it in the provided snippets.</strong></p><p>The iPhone is <code>enx...</code>, and the next step is to have it managed, so it gets an IP assigned and we can route traffic through that interface.
At this point, the guide deviates slightly from <a class=link href=https://wiki.archlinux.org/title/IPhone_tethering#Using_systemd-networkd target=_blank rel=noopener>Arch Wiki&rsquo;s setup using systemd-networkd</a>.
Although one may set it up that way, Ubuntu Server ships with netplan, which we take advantage of.
That way, we only need to configure netplan.</p><p>There should already be an entry for <code>eth0</code>, so you may only add the part for the iPhone.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>sudo vim /etc/netplan/50-cloud-init.yaml
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>network</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=m>2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>renderer</span><span class=p>:</span><span class=w> </span><span class=l>networkd</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>ethernets</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>enxfae5ce082148</span><span class=p>:</span><span class=w>    </span><span class=l>// Add this</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>dhcp4</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>       </span><span class=l>// Add this</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=l>// ... keep eth0 unchanged for now</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>Apply the new network config.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>netplan apply
</span></span></code></pre></td></tr></table></div></div><p>We can confirm it using the ip command.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>ip a
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>4: enxfae5ce082148: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc fq_codel state UP group default qlen 1000
</span></span><span class=line><span class=cl>    link/ether aa:bb:cc:dd:ff:gg brd ff:ff:ff:ff:ff:ff
</span></span><span class=line><span class=cl>    inet 123.12.10.4/28 metric 100 brd 123.12.10.15 scope global dynamic enxfae5ce082148
</span></span><span class=line><span class=cl>       valid_lft 86357sec preferred_lft 86357sec
</span></span><span class=line><span class=cl>    inet6 1111:1222:333:4444:5555:6666:7777:8888/64 scope global mngtmpaddr noprefixroute
</span></span><span class=line><span class=cl>       valid_lft forever preferred_lft forever
</span></span><span class=line><span class=cl>    inet6 1111::2222:3333:4444:2148/64 scope link proto kernel_ll
</span></span><span class=line><span class=cl>       valid_lft forever preferred_lft forever
</span></span></code></pre></td></tr></table></div></div><p>To test the connection, curl provides the option to set an interface through which to connect.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-gdscript3 data-lang=gdscript3><span class=line><span class=cl><span class=n>curl</span> <span class=o>--</span><span class=n>interface</span> <span class=n>enxfae5ce082148</span> \
</span></span><span class=line><span class=cl>   <span class=n>https</span><span class=p>:</span><span class=o>//</span><span class=n>example</span><span class=o>.</span><span class=n>com</span> \ 
</span></span><span class=line><span class=cl>    <span class=o>-</span><span class=n>w</span> <span class=s1>&#39;%{speed_download}&#39;</span> <span class=o>-</span><span class=n>o</span> <span class=o>/</span><span class=n>dev</span><span class=o>/</span><span class=n>null</span>
</span></span></code></pre></td></tr></table></div></div><p>Great, now you could use the iPhone&rsquo;s USB tethered network to connect to the internet.</p><h3 id=route-traffic-through-the-iphone>Route traffic through the iPhone</h3><p>The second part is to tell iptables to route traffic through our iPhone&rsquo;s interface.
It is done with adding this entry using the iptables command.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>iptables -t nat -A POSTROUTING -o enxfae5ce082148 -j MASQUERADE
</span></span></code></pre></td></tr></table></div></div><p>Note that the newly created entry is not persisted on reboot.
To persist it, one solution is to use <code>iptables-persistent</code>.
Whilst installing, it asks you to back up existing configurations.
Answer &ldquo;Yes&rdquo;.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>sudo apt install -y iptables-persistent
</span></span></code></pre></td></tr></table></div></div><p>You will be able to confirm a <code>MASQUERADE</code> entry running</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>cat /etc/iptables/rules.v4
</span></span></code></pre></td></tr></table></div></div><p>In case the entry is not present, rerun the steps and the persistence</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>sudo iptables-save &gt; /etc/iptables/rules.v4
</span></span></code></pre></td></tr></table></div></div><p>We still need to enable IP forwarding between interfaces.
This is achieved adding the following configuration.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>sudo vim /etc/sysctl.d/30-ipforward.conf
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>net.ipv4.ip_forward = 1
</span></span></code></pre></td></tr></table></div></div><p>Last but not least, we must be able to connect on eth0.
I did not get into the steps of setting up DHCP on it, so you may do that yourself.
After this step, it will be assigned <code>192.168.42.1</code>.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>sudo vim /etc/netplan/50-cloud-init.yaml
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>network</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=m>2</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>renderer</span><span class=p>:</span><span class=w> </span><span class=l>networkd</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>ethernets</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>enxfae5ce082148</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>dhcp4</span><span class=p>:</span><span class=w> </span><span class=kc>true</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>eth0</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>dhcp4</span><span class=p>:</span><span class=w> </span><span class=kc>false</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>      </span><span class=nt>addresses</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=m>192.168.42.1</span><span class=l>/24</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>From here on, for connecting to your RaspberryPi on <code>eth0</code>, you will need to assign the external device (e.g. a Laptop) a correct IP address, the right net mask and the right gateway.
Note that the IP address suffix must be a value between 2 and 254.</p><p>Given our setup, the configuration is</p><div class=table-wrapper><table><thead><tr><th>Type</th><th>Value</th></tr></thead><tbody><tr><td>IP Address</td><td>192.168.42.X</td></tr><tr><td>Gateway</td><td>192.168.42.1</td></tr><tr><td>Netmask</td><td>24 or 255.255.255.0</td></tr></tbody></table></div><p>Reboot the RaspberryPi, and the changes take effect.
Keep in mind that you <u>must</u> assign the IP on your external device like above table, otherwise you will not see the RPi.</p><p>The Pi can be accessed at <code>ssh your-name@192.168.42.1</code> thereafter.</p><h2 id=using-the-raspberrypi-with-a-router>Using the RaspberryPi with a Router</h2><p>The final step of this setup is to use the RaspberryPi as the internet provider for a router.
Across most routers, these steps are almost identical, and you may consult your router&rsquo;s documentation on where to find the right setuppage.</p><p>First, you need to connect your RaspberryPi to the port of the router that says &ldquo;WAN&rdquo;.</p><p>Then you need to find out where you can set the Conenction Mode/Internet Connection type of your router.
Provide the values as below, and your router should be able to connect to the RaspberryPi, and use its network.</p><div class=table-wrapper><table><thead><tr><th>Type</th><th>Value</th></tr></thead><tbody><tr><td>Connection Mode</td><td>Static IP</td></tr><tr><td>IP address</td><td>192.168.42.77</td></tr><tr><td>Subnet Mask</td><td>255.255.255.0</td></tr><tr><td>Default Gateway</td><td>192.168.42.1</td></tr><tr><td>Primary DNS server</td><td>9.9.9.9</td></tr><tr><td>Secondary DNS server</td><td>8.8.8.8</td></tr></tbody></table></div><hr><p>The resulting speed with this setup is ~190 Mbit downloading, and 22 Mbit uploading.
With a different USB cable, I only achieved 120 Mbit, so the remaining 110 Mbit may be due to the USB cable.</p><p><img src=/p/2025-iphone-ethernet-bridge-rpi-4-ubuntu/speedtest.webp width=412 height=122 srcset="/p/2025-iphone-ethernet-bridge-rpi-4-ubuntu/speedtest_hu_b9cd19f0c84d0d6d.webp 480w, /p/2025-iphone-ethernet-bridge-rpi-4-ubuntu/speedtest_hu_aee8f617dd64fe2c.webp 1024w" loading=lazy alt=speedtest-result class=gallery-image data-flex-grow=337 data-flex-basis=810px></p><p>Connecting to the iPhone directly gives me almost 300 Mbit, so there is definitely a loss of performance somewhere.</p></section><footer class=article-footer><section class=article-tags><a href=/tags/linux/>Linux</a>
<a href=/tags/ubuntu/>Ubuntu</a>
<a href=/tags/raspberrypi/>RaspberryPi</a></section><section class=article-copyright><svg class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg>
<span>Licensed under CC BY-NC-SA 4.0</span></section><section class=article-lastmod><svg class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg>
<span>Last updated on May 11, 2025 08:00 UTC</span></section></footer></article><aside class=related-content--wrapper><h2 class=section-title>Related content</h2><div class=related-content><div class="flex article-list--tile"><article><a href=/p/2025-arch-and-i3-hello-sway-install-arch-and-sway/><div class=article-details><h2 class=article-title>Arch and i3 - Hello, Sway! - Install Arch and Sway</h2></div></a></article><article><a href=/p/2021-ubuntu-gui-wsl2/><div class=article-details><h2 class=article-title>Ubuntu with WSL2 and i3 Window Manager GUI</h2></div></a></article><article><a href=/p/2021-lenovo-legion-ubuntu/><div class=article-details><h2 class=article-title>Ubuntu and i3 on Lenovo Legion 5 Pro</h2></div></a></article><article><a href=/p/2021-raspberry-pi-four-remote-multimedia-station/><div class=article-details><h2 class=article-title>RaspberryPi 4 as a remote Multimedia Station</h2></div></a></article><article><a href=/p/2021-raspberry-pi-four-dht-docker/><div class=article-details><h2 class=article-title>Read Temperature & Humidity with RaspberryPi 4 - Docker Setup</h2></div></a></article></div></div></aside><footer class=site-footer><section class=copyright>&copy;
2025 revontulet.dev</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>Theme <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.30.0>Stack</a></b> designed by <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a></section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.1e9a3bafd846ced4c345d084b355fb8c7bae75701c338f8a1f8a82c780137826.js defer></script><script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script><script defer src=https://static.cloudflareinsights.com/beacon.min.js data-cf-beacon='{"token": "ab26ba39e87544c98ce4711525f9a8b8"}'></script></body></html>